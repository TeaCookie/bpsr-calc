---
import background from "../assets/background.svg";
import { getAllMaterials } from "../utils/materialController";
import MainTableShell from "../components/mainTableShell";
import AdminForm from "./adminForm";

const initialRecipes = await getAllMaterials();
---

<div id="container">
  <img id="background" src={background.src} alt="" fetchpriority="high" />
  <main>
    <div class="dashboard-layout">
      <MainTableShell client:load initialData={initialRecipes} />
    </div>
    <div style="padding-top: 30px;">This project is licensed under the
Creative Commons Attribution-NonCommercial 4.0 International (CC BY-NC 4.0) license.</div>
    <!-- <AdminForm client:load/> -->
  </main>

  <style>
    #background {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      filter: blur(100px);
    }

    #container {
      font-family: Inter, Roboto, "Helvetica Neue", "Arial Nova", "Nimbus Sans",
        Arial, sans-serif;
      height: 100%;
    }

    main {
      height: 100vh;
      /* display: flex; */
      justify-content: center;
      align-items: flex-start;
    }

    :global(.dashboard-layout) {
    display: flex;
    flex-direction: row;
    align-items: stretch;
    justify-content: flex-start;
    height: 90vh;
    width: 90%;
    max-width: 1400px;
    gap: 1.5rem;
  }

  :global(.price-editor-container) {
    width: 250px;
    flex-shrink: 0;
    background: rgba(255, 255, 255, 0.8);
    border-radius: 12px;
    padding: 1rem;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    display: flex;
    flex-direction: column;
  }

  :global(.main-table-container) {
    flex-grow: 1;
    background: white;
    border-radius: 12px;
    padding: 1rem;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    overflow: auto;
  }

    h1 {
      font-size: 22px;
      margin-top: 0.25em;
    }

    #links {
      display: flex;
      gap: 16px;
    }

    #links a {
      display: flex;
      align-items: center;
      padding: 10px 12px;
      color: #111827;
      text-decoration: none;
      transition: color 0.2s;
    }

    #links a:hover {
      color: rgb(78, 80, 86);
    }

    #links a svg {
      height: 1em;
      margin-left: 8px;
    }

    #links a.button {
      color: white;
      background: linear-gradient(83.21deg, #3245ff 0%, #bc52ee 100%);
      box-shadow:
        inset 0 0 0 1px rgba(255, 255, 255, 0.12),
        inset 0 -2px 0 rgba(0, 0, 0, 0.24);
      border-radius: 10px;
    }

    #links a.button:hover {
      color: rgb(230, 230, 230);
      box-shadow: none;
    }

    pre {
      font-family: ui-monospace, "Cascadia Code", "Source Code Pro", Menlo,
        Consolas, "DejaVu Sans Mono", monospace;
      font-weight: normal;
      background: linear-gradient(14deg, #d83333 0%, #f041ff 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin: 0;
    }

    h2 {
      margin: 0 0 1em;
      font-weight: normal;
      color: #111827;
      font-size: 20px;
    }

    p {
      color: #4b5563;
      font-size: 16px;
      line-height: 24px;
      letter-spacing: -0.006em;
      margin: 0;
    }
  </style>
</div>
